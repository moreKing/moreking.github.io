import{_ as a,c as t,ai as i,o as e}from"./chunks/framework.DcWFUpHS.js";const k=JSON.parse('{"title":"Linux迁移数据","description":"","frontmatter":{},"headers":[],"relativePath":"linux/shterm_data.md","filePath":"linux/shterm_data.md","lastUpdated":1737611111000}'),n={name:"linux/shterm_data.md"};function l(p,s,r,o,h,d){return e(),t("div",null,s[0]||(s[0]=[i(`<h1 id="linux迁移数据" tabindex="-1">Linux迁移数据 <a class="header-anchor" href="#linux迁移数据" aria-label="Permalink to &quot;Linux迁移数据&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">提示</p><p>所有操作均在linux命令行操作，如果有其他的控制台程序，需要提前取消，保证两台服务器之间的网络通信</p></div><p><strong>将A服务器数据 --&gt; 迁移到B服务器</strong></p><h3 id="_1-登录a后台" tabindex="-1">1. 登录A后台 <a class="header-anchor" href="#_1-登录a后台" aria-label="Permalink to &quot;1. 登录A后台&quot;">​</a></h3><p>使用root登录到<span style="color:red;"><strong>A Linux</strong></span>，如果<span style="color:red;"><strong>B Linux</strong></span>是秘钥登录，则将新搭建好的<span style="color:red;"><strong>B Linux</strong></span>秘钥文件上传到<span style="color:red;"><strong>A Linux</strong></span>服务器,并修改文件权限为 600</p><p><code>chmod 600 shterm_key </code></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost test]# rz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost test]# ll</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-rw-r--r--.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1671</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Feb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2021</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shterm_key</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost test]# chmod 600 shterm_key </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost test]# ll</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-rw-------.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1671</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Feb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2021</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shterm_key</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@localhost test]#</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-认识scp" tabindex="-1">2. 认识SCP <a class="header-anchor" href="#_2-认识scp" aria-label="Permalink to &quot;2. 认识SCP&quot;">​</a></h3><p>scp是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，不过cp只是在本机进行拷贝不能跨服务器，而且scp传输是加密的。可能会稍微影响一下速度。</p><p>另外，scp还非常不占资源，不会提高多少系统负荷</p><div class="tip custom-block"><p class="custom-block-title">提示</p><p><code>shterm</code>仅支持使用<code>scp</code>，不能使用<code>sftp</code>，<code>scp</code>基本Linux都支持，而<code>sftp</code>则不一定</p></div><p><strong>常用参数</strong></p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>-C</td><td>允许压缩。（将-C标志传递给ssh，从而打开压缩功能）</td></tr><tr><td>-p</td><td>保留原文件的修改时间，访问时间和访问权限</td></tr><tr><td>-q</td><td>不显示传输进度条</td></tr><tr><td>-r</td><td>递归复制整个目录。<span style="color:red;">（传输目录必填）</span></td></tr><tr><td>-v</td><td>详细方式显示输出</td></tr><tr><td>-i</td><td>identity_file 秘钥登录，指定秘钥文件</td></tr><tr><td>-P</td><td>port 注意是大写的P, port是指定数据传输用到的端口号</td></tr></tbody></table><p>从本地服务器复制到远程服务器 命令格式：</p><p><code>scp local_file remote_username@remote_ip:remote_folder</code></p><p>从远程服务器复制到本地服务器 命令格式：</p><p><code>scp remote_username@remote_ip:remote_folder local_file</code></p><h3 id="_3-示例" tabindex="-1">3. 示例 <a class="header-anchor" href="#_3-示例" aria-label="Permalink to &quot;3. 示例&quot;">​</a></h3><p>将<span style="color:red;"><strong>A Linux</strong></span>服务器的文件复制到<span style="color:red;"><strong>B Linux</strong></span>服务器，登录到<span style="color:red;"><strong>A Linux</strong></span>服务器后台，执行<code>scp</code>命令:</p><p><code>scp -i shterm_key -P 22 -r -p /var/log/shterm/2023/ root@192.168.2.30:/var/log/shterm/2023/</code></p><p>如果需要排除某个目录</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --exclude=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/local/folder/exclude&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /local/folder</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@remote:/remote/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,22)]))}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
